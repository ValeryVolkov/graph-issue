apply plugin: 'java'

group 'ru.valery'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {

    testImplementation("org.junit.jupiter:junit-jupiter-engine:5.5.2")
    testRuntimeOnly("org.junit.platform:junit-platform-launcher:1.5.2")
    testRuntimeOnly("org.junit.vintage:junit-vintage-engine:5.5.2")
    
    testCompile ("org.apache.commons:commons-csv:1.7")
}


test {

//    junit5
    useJUnitPlatform()

    testLogging.showStandardStreams = true
    ignoreFailures = true

   
    maxParallelForks = Runtime.runtime.availableProcessors().intdiv(2) ?: 1

    systemProperties = [
            'junit.jupiter.execution.parallel.enabled': true,
            'junit.jupiter.execution.parallel.config.strategy': 'fixed',
            'junit.jupiter.execution.parallel.config.fixed.parallelism': 3
    ]

    forkEvery = 1
}